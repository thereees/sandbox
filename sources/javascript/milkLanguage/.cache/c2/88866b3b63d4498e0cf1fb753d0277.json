{"id":"node_modules/seshet/dist_node/seshet.js","dependencies":[{"name":"/mnt/f/github/sandbox/sources/javascript/milkLanguage/package.json","includedInParent":true,"mtime":1565340560859},{"name":"/mnt/f/github/sandbox/sources/javascript/milkLanguage/node_modules/seshet/package.json","includedInParent":true,"mtime":1565340560822}],"generated":{"js":"/*\n * THIS FILE IS AUTO GENERATED from 'lib/seshet.kep'\n * DO NOT EDIT\n*/\n\"use strict\";\nvar create, lookup, update, prune;\nvar max = (function(x, y) {\n    return ((x > y) ? x : y);\n});\nvar heightFromChild = (function(child) {\n    return (child ? (1 + child.height) : 0);\n});\nvar height = (function(root) {\n    return (!root ? 0 : max(heightFromChild(root.left), heightFromChild(root.right)));\n});\nvar bf = (function(node) {\n    return (!node ? 0 : (heightFromChild(node.left) - heightFromChild(node.right)));\n});\nvar Cell = (function(id, val, delegate) {\n    (this.id = id);\n    (this.val = val);\n    (this.delegate = delegate);\n});\n(Cell.lookup = (function(base, eq, id) {\n    for (var cell = base; cell;\n        (cell = cell.delegate))\n        if (eq(cell.id, id)) return cell.val;\n    return null;\n}));\nvar Node = (function(key, cell, l, r, height) {\n    (this.key = key);\n    (this.cell = cell);\n    (this.left = l);\n    (this.right = r);\n    (this.height = height);\n});\n(Node.setChildren = (function(node, l, r) {\n    return new(Node)(node.key, node.cell, l, r, ((l || r) ? (1 + max(height(l), height(r))) : 0));\n}));\n(Node.setLeft = (function(node, l) {\n    return Node.setChildren(node, l, node.right);\n}));\n(Node.setRight = (function(node, r) {\n    return Node.setChildren(node, node.left, r);\n}));\n(Node.lookup = (function(root, compare, eq, key, id) {\n    for (var node = root; node;) {\n        var diff = compare(key, node.key);\n        if ((diff === 0)) return Cell.lookup(node.cell, eq, id);\n        (node = ((diff < 0) ? node.left : node.right));\n    }\n    return null;\n}));\n(Node.put = (function(node, id, val) {\n    return new(Node)(node.key, new(Cell)(id, val, node.cell), node.left, node.right, node.height);\n}));\nvar rr = (function(node) {\n    return (!node ? node : Node.setLeft(node.right, Node.setRight(node, node.right.left)));\n});\nvar ll = (function(node) {\n    return (!node ? node : Node.setRight(node.left, Node.setLeft(node, node.left.right)));\n});\nvar lr = (function(node) {\n    return ll(Node.setLeft(node, rr(node.left)));\n});\nvar rl = (function(node) {\n    return rr(Node.setRight(node, ll(node.right)));\n});\nvar rot = (function(node) {\n    var d = bf(node);\n    if ((d > 1)) return ((bf(node.left) <= -1) ? lr(node) : ll(node));\n    else if ((d < -1)) return ((bf(node.right) >= 1) ? rl(node) : rr(node));\n    return node;\n});\n(Node.update = (function(root, compare, key, id, val) {\n    if (!root) return new(Node)(key, new(Cell)(id, val, null), null, null, 0);\n    var diff = compare(key, root.key);\n    if ((diff === 0)) return Node.put(root, id, val);\n    return rot(((diff < 0) ? Node.setLeft(root, Node.update(root.left, compare, key, id, val)) : Node.setRight(\n        root, Node.update(root.right, compare, key, id, val))));\n}));\n(Node.rebalance = (function(root) {\n    return ((Math.abs(bf(root)) <= 1) ? root : rot(Node.setChildren(root, Node.rebalance(root.left), Node.rebalance(\n        root.right))));\n}));\n(Node.prune = (function(root, compare, lower, upper) {\n    if (!root) return root;\n    if ((lower !== undefined)) {\n        var dl = compare(root.key, lower);\n        if ((dl < 0)) return Node.prune(root.right, compare, lower, upper);\n        else if ((dl === 0)) return Node.setChildren(root, null, Node.prune(root.right, compare, undefined,\n            upper));\n    }\n    if (((upper !== undefined) && (compare(root.key, upper) >= 0))) return Node.prune(root.left, compare, lower,\n        upper);\n    return Node.setChildren(root, Node.prune(root.left, compare, lower, upper), Node.prune(root.right, compare,\n        lower, upper));\n}));\nvar Memoer = (function(compare, eq, root) {\n    (this.compare = compare);\n    (this.eq = eq);\n    (this.root = root);\n});\n(Memoer.setRoot = (function(m, root) {\n    return new(Memoer)(m.compare, m.eq, root);\n}));\n(create = (function() {\n        var equals = (function(x, y) {\n            return (x === y);\n        });\n        return (function(compare, eq) {\n            return new(Memoer)(compare, (eq || equals), null);\n        });\n    })\n    .call(this));\n(lookup = (function(m, key, id) {\n    return Node.lookup(m.root, m.compare, m.eq, key, id);\n}));\n(update = (function(m, key, id, val) {\n    return Memoer.setRoot(m, Node.update(m.root, m.compare, key, id, val));\n}));\n(prune = (function(m, lower, upper) {\n    return Memoer.setRoot(m, Node.rebalance(Node.prune(m.root, m.compare, lower, upper)));\n}));\n(exports.create = create);\n(exports.lookup = lookup);\n(exports.update = update);\n(exports.prune = prune);"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":34,"column":0},"generated":{"line":34,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":35,"column":0},"generated":{"line":35,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":36,"column":0},"generated":{"line":36,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":37,"column":0},"generated":{"line":37,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":38,"column":0},"generated":{"line":38,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":39,"column":0},"generated":{"line":39,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":40,"column":0},"generated":{"line":40,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":41,"column":0},"generated":{"line":41,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":42,"column":0},"generated":{"line":42,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":43,"column":0},"generated":{"line":43,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":44,"column":0},"generated":{"line":44,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":45,"column":0},"generated":{"line":45,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":46,"column":0},"generated":{"line":46,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":47,"column":0},"generated":{"line":47,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":48,"column":0},"generated":{"line":48,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":49,"column":0},"generated":{"line":49,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":50,"column":0},"generated":{"line":50,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":51,"column":0},"generated":{"line":51,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":52,"column":0},"generated":{"line":52,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":53,"column":0},"generated":{"line":53,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":54,"column":0},"generated":{"line":54,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":55,"column":0},"generated":{"line":55,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":56,"column":0},"generated":{"line":56,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":57,"column":0},"generated":{"line":57,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":58,"column":0},"generated":{"line":58,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":59,"column":0},"generated":{"line":59,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":60,"column":0},"generated":{"line":60,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":61,"column":0},"generated":{"line":61,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":62,"column":0},"generated":{"line":62,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":63,"column":0},"generated":{"line":63,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":64,"column":0},"generated":{"line":64,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":65,"column":0},"generated":{"line":65,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":66,"column":0},"generated":{"line":66,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":67,"column":0},"generated":{"line":67,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":68,"column":0},"generated":{"line":68,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":69,"column":0},"generated":{"line":69,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":70,"column":0},"generated":{"line":70,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":71,"column":0},"generated":{"line":71,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":72,"column":0},"generated":{"line":72,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":73,"column":0},"generated":{"line":73,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":74,"column":0},"generated":{"line":74,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":75,"column":0},"generated":{"line":75,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":76,"column":0},"generated":{"line":76,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":77,"column":0},"generated":{"line":77,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":78,"column":0},"generated":{"line":78,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":79,"column":0},"generated":{"line":79,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":80,"column":0},"generated":{"line":80,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":81,"column":0},"generated":{"line":81,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":82,"column":0},"generated":{"line":82,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":83,"column":0},"generated":{"line":83,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":84,"column":0},"generated":{"line":84,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":85,"column":0},"generated":{"line":85,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":86,"column":0},"generated":{"line":86,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":87,"column":0},"generated":{"line":87,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":88,"column":0},"generated":{"line":88,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":89,"column":0},"generated":{"line":89,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":90,"column":0},"generated":{"line":90,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":91,"column":0},"generated":{"line":91,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":92,"column":0},"generated":{"line":92,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":93,"column":0},"generated":{"line":93,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":94,"column":0},"generated":{"line":94,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":95,"column":0},"generated":{"line":95,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":96,"column":0},"generated":{"line":96,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":97,"column":0},"generated":{"line":97,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":98,"column":0},"generated":{"line":98,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":99,"column":0},"generated":{"line":99,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":100,"column":0},"generated":{"line":100,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":101,"column":0},"generated":{"line":101,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":102,"column":0},"generated":{"line":102,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":103,"column":0},"generated":{"line":103,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":104,"column":0},"generated":{"line":104,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":105,"column":0},"generated":{"line":105,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":106,"column":0},"generated":{"line":106,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":107,"column":0},"generated":{"line":107,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":108,"column":0},"generated":{"line":108,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":109,"column":0},"generated":{"line":109,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":110,"column":0},"generated":{"line":110,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":111,"column":0},"generated":{"line":111,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":112,"column":0},"generated":{"line":112,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":113,"column":0},"generated":{"line":113,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":114,"column":0},"generated":{"line":114,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":115,"column":0},"generated":{"line":115,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":116,"column":0},"generated":{"line":116,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":117,"column":0},"generated":{"line":117,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":118,"column":0},"generated":{"line":118,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":119,"column":0},"generated":{"line":119,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":120,"column":0},"generated":{"line":120,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":121,"column":0},"generated":{"line":121,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":122,"column":0},"generated":{"line":122,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":123,"column":0},"generated":{"line":123,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":124,"column":0},"generated":{"line":124,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":125,"column":0},"generated":{"line":125,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":126,"column":0},"generated":{"line":126,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":127,"column":0},"generated":{"line":127,"column":0}},{"source":"node_modules/seshet/dist_node/seshet.js","original":{"line":128,"column":0},"generated":{"line":128,"column":0}}],"sources":{"node_modules/seshet/dist_node/seshet.js":"/*\n * THIS FILE IS AUTO GENERATED from 'lib/seshet.kep'\n * DO NOT EDIT\n*/\n\"use strict\";\nvar create, lookup, update, prune;\nvar max = (function(x, y) {\n    return ((x > y) ? x : y);\n});\nvar heightFromChild = (function(child) {\n    return (child ? (1 + child.height) : 0);\n});\nvar height = (function(root) {\n    return (!root ? 0 : max(heightFromChild(root.left), heightFromChild(root.right)));\n});\nvar bf = (function(node) {\n    return (!node ? 0 : (heightFromChild(node.left) - heightFromChild(node.right)));\n});\nvar Cell = (function(id, val, delegate) {\n    (this.id = id);\n    (this.val = val);\n    (this.delegate = delegate);\n});\n(Cell.lookup = (function(base, eq, id) {\n    for (var cell = base; cell;\n        (cell = cell.delegate))\n        if (eq(cell.id, id)) return cell.val;\n    return null;\n}));\nvar Node = (function(key, cell, l, r, height) {\n    (this.key = key);\n    (this.cell = cell);\n    (this.left = l);\n    (this.right = r);\n    (this.height = height);\n});\n(Node.setChildren = (function(node, l, r) {\n    return new(Node)(node.key, node.cell, l, r, ((l || r) ? (1 + max(height(l), height(r))) : 0));\n}));\n(Node.setLeft = (function(node, l) {\n    return Node.setChildren(node, l, node.right);\n}));\n(Node.setRight = (function(node, r) {\n    return Node.setChildren(node, node.left, r);\n}));\n(Node.lookup = (function(root, compare, eq, key, id) {\n    for (var node = root; node;) {\n        var diff = compare(key, node.key);\n        if ((diff === 0)) return Cell.lookup(node.cell, eq, id);\n        (node = ((diff < 0) ? node.left : node.right));\n    }\n    return null;\n}));\n(Node.put = (function(node, id, val) {\n    return new(Node)(node.key, new(Cell)(id, val, node.cell), node.left, node.right, node.height);\n}));\nvar rr = (function(node) {\n    return (!node ? node : Node.setLeft(node.right, Node.setRight(node, node.right.left)));\n});\nvar ll = (function(node) {\n    return (!node ? node : Node.setRight(node.left, Node.setLeft(node, node.left.right)));\n});\nvar lr = (function(node) {\n    return ll(Node.setLeft(node, rr(node.left)));\n});\nvar rl = (function(node) {\n    return rr(Node.setRight(node, ll(node.right)));\n});\nvar rot = (function(node) {\n    var d = bf(node);\n    if ((d > 1)) return ((bf(node.left) <= -1) ? lr(node) : ll(node));\n    else if ((d < -1)) return ((bf(node.right) >= 1) ? rl(node) : rr(node));\n    return node;\n});\n(Node.update = (function(root, compare, key, id, val) {\n    if (!root) return new(Node)(key, new(Cell)(id, val, null), null, null, 0);\n    var diff = compare(key, root.key);\n    if ((diff === 0)) return Node.put(root, id, val);\n    return rot(((diff < 0) ? Node.setLeft(root, Node.update(root.left, compare, key, id, val)) : Node.setRight(\n        root, Node.update(root.right, compare, key, id, val))));\n}));\n(Node.rebalance = (function(root) {\n    return ((Math.abs(bf(root)) <= 1) ? root : rot(Node.setChildren(root, Node.rebalance(root.left), Node.rebalance(\n        root.right))));\n}));\n(Node.prune = (function(root, compare, lower, upper) {\n    if (!root) return root;\n    if ((lower !== undefined)) {\n        var dl = compare(root.key, lower);\n        if ((dl < 0)) return Node.prune(root.right, compare, lower, upper);\n        else if ((dl === 0)) return Node.setChildren(root, null, Node.prune(root.right, compare, undefined,\n            upper));\n    }\n    if (((upper !== undefined) && (compare(root.key, upper) >= 0))) return Node.prune(root.left, compare, lower,\n        upper);\n    return Node.setChildren(root, Node.prune(root.left, compare, lower, upper), Node.prune(root.right, compare,\n        lower, upper));\n}));\nvar Memoer = (function(compare, eq, root) {\n    (this.compare = compare);\n    (this.eq = eq);\n    (this.root = root);\n});\n(Memoer.setRoot = (function(m, root) {\n    return new(Memoer)(m.compare, m.eq, root);\n}));\n(create = (function() {\n        var equals = (function(x, y) {\n            return (x === y);\n        });\n        return (function(compare, eq) {\n            return new(Memoer)(compare, (eq || equals), null);\n        });\n    })\n    .call(this));\n(lookup = (function(m, key, id) {\n    return Node.lookup(m.root, m.compare, m.eq, key, id);\n}));\n(update = (function(m, key, id, val) {\n    return Memoer.setRoot(m, Node.update(m.root, m.compare, key, id, val));\n}));\n(prune = (function(m, lower, upper) {\n    return Memoer.setRoot(m, Node.rebalance(Node.prune(m.root, m.compare, lower, upper)));\n}));\n(exports.create = create);\n(exports.lookup = lookup);\n(exports.update = update);\n(exports.prune = prune);"},"lineCount":128}},"error":null,"hash":"188f9fdcf4203b5524b296fcc04419d6","cacheData":{"env":{}}}